<!DOCTYPE html><html><head><title>Open Diagram</title><link rel="stylesheet" type="text/css" href="vg.min.css"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><script type="text/javascript">function handleFiles(e){for(var n=0;n<e.length;n++)!function(e){window.parent.openNew&&window.parent.open(window.parent.location.href);var n=new FileReader;n.onload=function(n){var t=n.target.result,o=e.name,i=o.split("."),r=i.pop();"json"==r&&(t=window.parent.CodeTranslator.json2xml(t)),window.parent.openFile.setData(t,o)},n.onerror=function(e){console.log(e)},n.readAsText(e)}(e[n])}function handleSubmit(){var e=window.openForm||document.getElementById("openForm");return window.parent.Graph.fileSupport&&e.upfile.files.length>0?(handleFiles(e.upfile.files),!1):/(\.xml)$/i.test(e.upfile.value)||/(\.txt)$/i.test(e.upfile.value)||/(\.mxe)$/i.test(e.upfile.value)?(window.parent.openNew&&window.parent.open(window.parent.location.href),!0):(window.parent.mxUtils.alert(window.parent.mxResources.get("invalidOrMissingFile")),!1)}function hideWindow(e){window.parent.openFile.cancel(e)}function fileChanged(){var e=window.openForm||document.getElementById("openForm"),n=document.getElementById("openButton");e.upfile.value.length>0?n.removeAttribute("disabled"):n.setAttribute("disabled","disabled")}function main(){if(window.parent.Editor.useLocalStorage){mxGraphDiv.innerHTML="";var e=document.createElement("div");if(e.style.fontFamily="Arial",0==localStorage.length)window.parent.mxUtils.write(e,window.parent.mxResources.get("noFiles"));else{for(var n=[],t=0;t<localStorage.length;t++)n.push(localStorage.key(t));n.sort(function(e,n){return e.toLowerCase().localeCompare(n.toLowerCase())});for(var t=0;t<n.length;t++){var o=document.createElement("a");o.style.fontDecoration="none",o.style.fontSize="14pt";var i=n[t];window.parent.mxUtils.write(o,i),o.setAttribute("href","javascript:void(0);"),e.appendChild(o);var r=document.createElement("span");r.className="geSprite geSprite-delete",r.style.position="relative",r.style.cursor="pointer",r.style.display="inline-block",e.appendChild(r),window.parent.mxUtils.br(e),window.parent.mxEvent.addListener(r,"click",function(e){return function(){window.parent.mxUtils.confirm(window.parent.mxResources.get("delete")+' "'+e+'"?')&&(localStorage.removeItem(e),window.location.reload())}}(i)),window.parent.mxEvent.addListener(o,"click",function(e){return function(){try{window.parent.open(window.parent.location.href),window.parent.openFile.setData(localStorage.getItem(e),e)}catch(e){window.parent.mxUtils.alert(e.message)}}}(i))}}window.parent.mxUtils.br(e),window.parent.mxUtils.br(e);var a=window.parent.mxUtils.button(window.parent.mxResources.get("cancel"),function(){hideWindow(!0)});a.className="geBtn",e.appendChild(a),mxGraphDiv.appendChild(e)}else{var l=(document.getElementById("editLink"),document.getElementById("openButton"));l.value=window.parent.mxResources.get(window.parent.openKey||"open");var d=document.getElementById("cancelButton");d.value=window.parent.mxResources.get("cancel");var p=document.getElementById("openSupported");p.innerHTML=window.parent.mxResources.get("openSupported");var w=window.openForm||document.getElementById("openForm");w.setAttribute("action",window.parent.OPEN_URL)}}</script><body onload="main()"><form method="POST" enctype="multipart/form-data" action="" name="openForm" id="openForm" onsubmit="return handleSubmit()" accept-charset="UTF-8"><table style="width:100%"><tr><td style="height:40px;vertical-align:top" colspan="2"><input type="file" name="upfile" onchange="fileChanged()"></td></tr><tr><td colspan="2" height="120px" id="openSupported" style="font-family:arial;color:grey;font-size:9pt;vertical-align:top;text-align:left"></td></tr><tr><td></td><td style="vertical-align:middle;text-align:right;white-space:nowrap"><input type="button" id="cancelButton" class="geBtn" value="Cancel" onclick="hideWindow(!0)"> <input type="submit" id="openButton" class="geBtn gePrimaryBtn" value="Open" disabled="disabled"></td></tr></table></form></body></html>